#summary This page explains how to setup your project to use gwt-test-utils
#labels Phase-Requirements
#sidebar TableOfContents

= Getting gwt-test-utils =

_gwt-test-utils_ is an open source framework composed of several modules you can combine :

 * *gwt-test-utils-X.jar* : the core module of gwt-test-utils. It enables to execute GWT client classes in a standalone JVM.

 * *gwt-test-utils-csv-X.jar* : use this module if you want [http://code.google.com/p/gwt-test-utils/wiki/HowToWriteCsvScenario to write complexe test scenario easily]

 * *gwt-test-utils-gxt-X.jar* : use this module if you want to test UI designed with the popular third-party components librairy [http://www.sencha.com/products/extgwt/ ext-GWT]

 * *gwt-css-selector-X.jar* : this module is just an internal dependency of *gwt-test-utils-gxt-X.jar* to simulate CSS 3 selectors for GWT's DOM representation. Actually is just an adaptation of the nice [https://github.com/chrsan/css-selectors/tree css-selector API] from Christer Sandberg.

 * *gwt-test-utils-spring2-X.jar* : use this module if you want to test a GWT application which is connected to a Spring2-based backend

 * *gwt-test-utils-spring3-X.jar* : use this module if you want to test a GWT application which is connected to a Spring3-based backend

Note that those modules all directly depend on *gwt-test-utils-X.jar* and can be combined in your project {{{pom.xml}}}. However, *you should always use the same version* when combining them in a single project.

== Without Maven == 

You can download _gwt-test-utils_ X version jars through the [http://code.google.com/p/gwt-test-utils/downloads/list Download section].

In addition to _GWT_ jars, the framework requiers some other third-party librairies you should add to your project test classpath :

==== gwt-test-utils : ====

 * commons-beanutils-1.8.3.jar
 * commons-logging-1.1.1.jar
 * htmlparser-1.6.jar
 * javassist-3.12.1.GA.jar
 * junit-4.8.2.jar
 * slf4j-api-1.6.1.jar (with the adapter of your choice)

If you are interested in using a java mock framework, _gwt-test-utils_ has been tested with :

 * easymock-3.0.jar
 * mockito-core-1.8.5.jar


==== gwt-test-utils-csv : ====

Same dependencies as _gwt-test-utils_ module  plus :

 * antlr-runtime-3.1.1.jar


==== gwt-test-utils-gxt : ====

Same dependencies as _gwt-test-utils_ module plus :

 * gwt-css-selector-X.jar
 * gxt-2.2.x.jar


==== gwt-test-utils-spring2 : ====

Same dependencies as _gwt-test-utils_ module plus :

 * spring-2.5.x.jar


==== gwt-test-utils-spring3 : ====

Same dependencies as _gwt-test-utils_ module plus :

 * spring-3.0.x.jar


== With Maven ==

=== Pom releases configuration ===

First, you have to setup the required dependency in the _pom.xml_ :

{{{
<dependencies>
   ...
   <dependency>
      <groupId>com.octo.gwt.test</groupId>
      <artifactId>gwt-test-utils</artifactId>
      <version>X</version>
      <scope>test</scope>
   </dependency>
   ...
</dependencies>   
}}}


Other modules are listed by theirs artifactId :

 * {{{gwt-test-utils-csv}}}
 * {{{gwt-test-utils-gxt}}}
 * {{{gwt-test-utils-spring2}}}
 * {{{gwt-test-utils-spring3}}}


All those modules are hosted on a custom Maven repository, which is provided by [http://www.octo.com/ Octo Technology] :

{{{
<repositories>
   ...
   <repository>
      <id>forge.octo.com</id>
      <url>http://forge.octo.com/nexus/content/repositories/releases/</url>
   </repository>
   ...
</repositories>
}}}

== POM snapshots configuration ==

Sometimes, it could be helpfull to get the lastest snapshot. It's done with the following configuration :


{{{
<dependencies>
   ...
   <dependency>
      <groupId>com.octo.gwt.test</groupId>
      <artifactId>gwt-test-utils</artifactId>
      <version>X+1-SNAPSHOT</version>
      <scope>test</scope>
   </dependency>
   ...
</dependencies> 

...

<repositories>
   ...
   <repository>
      <id>snapshot-forge.octo.com</id>
         <url>http://forge.octo.com/nexus/content/repositories/snapshots/</url>
         <snapshots>
            <enabled>true</enabled>
         </snapshots>
         <releases>
            <enabled>false</enabled>
         </releases>
      </repository>
   ...
</repositories>
}}}


= Configure gwt-test-utils =

=== General project configuration ===

_gwt_test_utils_ *requiers* a {{{META-INF/gwt-test-utils.properties}}} configuration file in your project test classpath.

Add at least one 'module-file' property in it, just like this : 

{{{
com/example/mywebapp/YourModule1.gwt.xml = module-file
com/example/mywebapp/YourModule2.gwt.xml = module-file
}}}

Each module file declared here will be parsed by gwt-test-utils to know which classes are supposed to by compiled in JavaScript? and operated some magic modifications on them.

Note that you won't have to declare .gwt.xml files from modules which are inherited by the module you've declared in gwt-test-utils.properties file. 
So, if {{{YourModule2}}} was inheriting {{{YourModule1}}}, it would be useless to declare {{{YourModule1}}} in your {{{gwt-test-utils.properties}}} file.

=== Test classes configuration ===

All your GWT test classes *must* inherits {{{GwtTest}}} or one of its subclasses instead of the standard {{{GWTTestCase}}}.

Like {{{GWTTestCase}}}, you'll have to override a {{{GwtTest.getModuleName()}}} method to provide the full qualified name of the current tested module by implementing the getModuleName() method. 

*Be carefull to use a module you've declared in your META-INF/gwt-test-utils.properties* with the '{{{module-file}}}' key/value pair. Otherwise, an exception would be thrown.


= Running your tests = 

_gwt_test_utils_ tests are standard JUnit tests :-)

But, since it can be memory expensive (to test GWT in a simple JVM has a cost ;-)), you may have to increase the memory available.

== Under Eclipse == 

Just open a new JUnit Run configuration, and specify in the "JVM Arguments" text area the amount of memory you'll need for your tests. For example :

{{{
-Xmx512M -XX:MaxPermSize=128M
}}}


== With Maven ==

In your project {{{pom.xml}}}, configure the Maven test plugin to increase the amount of memory available :

{{{
<plugins>
   ...
   <plugin>
      <groupId>org.apache.maven.plugins</groupId>
      <artifactId>maven-surefire-plugin</artifactId>
      <configuration>
         <argLine>-Xmx512M -XX:MaxPermSize=128M</argLine>
      </configuration>
   </plugin>
   ...
</plugins>
}}}